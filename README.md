# Resource Entitlement Management System

... prototype in Clojure.

## Getting started

### Getting a database

Run the official postgres docker image and initialize the database:

```
./dev_db.sh
```

Which does roughly the following:

1. run a postgres container named `rems_test`
2. initialize the database with `resources/sql/init.sql`
3. create the schema with `lein run migrate`

When done you can stop (and automatically remove) the database.

```
docker stop rems_test
```

### Populating the database

- You can get some nice fake data with `lein run test-data`
- You can get an sql dump from the old system and use `./dev_transfer.sh dump.sql`

### Running interactively

```
lein repl

rems.standalone=> (start-app)
```

or alternatively

```
lein run
```

Point your browser to <http://localhost:3000>

### Running tests

To run unit tests:

```
lein test
```

To run tests that need a database:

```
lein test :all
```

To run all tests and output coverage:

```
lein with-profile test cloverage
```

## Generating CSS
CSS stylesheets are generated by garden automatically when accessing the application on a browser. The garden styles can also be manually compiled by calling the function:
```
rems.css.styles/generate-css
```

## Custom Themes

Custom themes can be added by creating a file, for example my-custom-theme.edn, to the resources/themes folder. The theming allows custom themes to only partially override the default attributes. To take the new theme into use add a key/value pair, `:theme "my-custom-theme"` in the case of your example, to the appropriate config.end under the env folder.

## Component Guide

You can access the component guide at `/guide`. It contains all the components in various configurations.
